+++
title = "取得したドメインの名前解決が出来ない"
date = "2017-12-23T00:00:00+09:00"
draft = "false"
author = "K@zuki."
# TODO: cover = "img/2017/12/name-resolution-of-acquired-domain-can-not-be-done/cover.jpg"
description = "先日、取得したドメインの名前解決が出来ない問題がありました。"
tags = ["DNS"]
+++

先日、取得したドメインの名前解決が出来ない問題がありました。

## TL;DR

* digを実行したらNXDOMAINだった
* whoisでドメインステータスを確認したら`clientHold`だった
* clientHoldが返ってくるのは、「情報認証手続きをしていない」か「whois情報に不備がある」
* 今回の問題は受信出来るメールアドレスを登録していなかったために情報認証手続きをしていなかった
* 登録時だけでも良いから、受信して内容を確認できるメールアドレス登録しよう

## 名前解決が出来ない
具体的に言うと、**NXDOMAIN**が返ってくる状態だったのです。
この状態だと、何のレコードもない状態です。
NSレコードもです。

```sh
dig example.com
```

明らかにおかしいですよね。
はい、2時間ぐらい試行錯誤して考えました。

## whoisを確認してみる
ダメでした。
会社の先輩から「`whois`の情報も見といた方がいいよ」と言われたので、愚直に`whois`コマンドを実行してみる。

```sh
whois example.com
```

whoisコマンドの結果の中に`domain status`というものがありました。
このドメインステータスの値が `client hold`となっていて、ぐぐってみると、[お名前.comのヘルプセンター](https://help.onamae.com/app/answers/detail/a_id/15333/)がヒットしました。
ここを読むと、大きく分けて2つの理由が考えられそうです。

* 情報認証手続きを行っていない
* ドメインのWhois情報に不備がある

## 最初だけでもいいから内容を確認できるメールアドレスを登録しよう
今回は、前者の**情報認証手続きを行っていない**に該当していました。 
ドメイン取得したり、whoisに情報を登録する時は、ちゃんと受信して内容を確認出来るメールアドレスを使いましょう。
じゃないと、急に名前解決出来なくなったりしますからね。。。
